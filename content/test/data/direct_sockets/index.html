<!DOCTYPE html>
<html>
<head>
  <title>Direct Sockets Test</title>
  <script>
    'use strict';

    async function openTcp(options) {
      try {
        let tcpSocket = await navigator.openTCPSocket(options);
        return ('openTcp succeeded: ' +
                '{remoteAddress: "' + tcpSocket.remoteAddress +
                '", remotePort: ' + tcpSocket.remotePort + '}');
      } catch(error) {
        return ('openTcp failed: ' + error);
      }
    }

    async function closeTcp(options, closeWriter) {
      try {
        let tcpSocket = await navigator.openTCPSocket(options);
        let writer = tcpSocket.writable.getWriter();
        if (closeWriter)
          await writer.close();
        await tcpSocket.close();
        return 'closeTcp succeeded';
      } catch(error) {
        return ('closeTcp failed: ' + error);
      }
    }

    async function openUdp(options) {
      try {
        let udpSocket = await navigator.openUDPSocket(options);
        return 'openUdp succeeded';
      } catch(error) {
        return ('openUdp failed: ' + error);
      }
    }

  </script>
</head>
<body>
  <h1>Direct Sockets Test</h1>
</body>
</html>
